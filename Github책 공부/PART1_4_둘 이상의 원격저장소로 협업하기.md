### 01. 원본저장소를 복사해서 너구리의 원격저장소를 만든다(fork)
- fork(포크): 남의 원본저장소를 내 계정의 원격저장소로 복사해오는 명령어.

#### 1) 평행세계를 만드는 브랜치(branch), 평행우주를 만드는 포크(fork)

- 원본저장소에 커밋을 직접 푸시할 수 있는 사람은 원본저장소를 만든 소유자뿐이다.
  - 다른 사람이 이곳에 푸시하려면 원본저장소의 소유자가 이 사람을 협력자로 등록해야 한다.
  - 등록되지 않은 사람이 푸시하면 에러가 발생한다.
  
- 원본 소유자가 협력자를 등록하는 방법.
  - 원본저장소의 메뉴에서 [Setting - Collaborators]페이지에 들어가서 등록하려는 유저를 찾는다.
  - 등록하려는 유저를 찾은 후, [Add collaborators]를 클릭하면 된다.
  - 원본 소유자가 협력자를 등록하면 협력자에게 초대 이메일이 보내지고, 협력자가 수락 버튼을 누르면 권한이 부여된다.  
  
- 풀 리퀘스트(pull request): 협력자들이 원본저장소에 직접 푸시하는 것에 대한 부담이 있을 때 이용할 수 있는 방법.

  - 협력자가 커밋을 올린 후 원본저장소의 소유자에게 병합 요청을 하면, 원본저장소의 소유가는 개발자의 병합 요청을 검토해서 원본저장소에 반영하는 것이다.

- 앞서 해보았던 ```브랜치```가 ```원본저장소 내에서 평행세계```를 만드는 것이라면, ```포크```는 ```평행우주```를 만든다고 볼 수 있다.
  - ```포크```는 브랜치를 포함한 원본저장소의 모든 커밋 이력을 새로운 원격저장소로 통째로 복사한다.
  - ```브랜치(평행세계)```에 올린 커밋 이력은 원본저장소에서 바로 볼 수 있다.
  - ```포크```로 복제한 원격저장소(평행우주)는 새로운 주소로 독립되었기 때문에 이곳의 이력을 보려면 추가적으로 이곳의 원격저장소 주소를 등록해야 한다.
  <br/>
  
  | <center></center> | 의의 | 편리한 점 | 불편한 점 |
  | ---- | ---- | ---- | ---- |
  | 브랜치 | 하나의 원본저장소에서 분기를 나눈다. | 하나의 원본저장소에서 코드 커밋 이력을 편하게 볼 수 있다. | 다수의 사용자가 다수의 브랜치를 만들면 관리하기 힘들다. |
  | 포크  | 여러 원격저장소를 만들어 분기를 나눈다. | 원본저장소에 영향을 미치지 않으므로 원격저장소에서 마음껏 코드를 수정할 수 있다. | 원본저장소의 이력을 보려면 따로 주소를 추가해야 한다. |
<br/>

#### 2) 남의 저장소를 내 계정에 통째로 복제하기(Fork)
- 복제하려는 상대방의 저장소에 들어가서 우측 상단의 [Fork]를 눌러 포크해준다.
  - 내 GirHub에 포크된 해당 저장소가 생긴 것을 볼 수 있다.
  
- 포크되어 새롭게 만들어진 상대방의 원격저장소를 소스트리로 내 컴퓨터에 받아온다.
  - 내 깃헙으로 포크된 저장소에서 우측 [Clone or download]버튼을 클릭해서 원격저장소 주소를 복사한다.   
     (상대방의 원격저장소 주소를 복사하면 안된다!!)
  - 소스트리 [iTshirt-cat]탭 오른쪽에 있는 [+]를 클릭한다.
    - 맥에서는 [+]버튼이 없어서 소스트리에서 [원격]클릭 후 해당 저장소이름의 우측에 있는 [클론]을 눌러줬다.
  - [New tab]탭이 열리면 [Clone]을 클릭한다. 
    - 첫 번째 입력란에는 마우스 우클릭 후 복사해 놓은 원격저장소 주소를 붙여넣기 한다.
    - 두 번째 입력란에는 포크한 원격저장소와 연결할 내 컴퓨터의 로컬저장소 폴더를 만들어서 선택한다.
    - 세 번째 입력란에는 로컬저장소에 지어줄 이름을 입력한다.
<br/>

- 포크한 원격저장소에서 커밋을 해보자.
  - 비쥬얼 스튜디오 코드에서 새로 내려받은 로컬 저장소를 연다.
  - like.md파일을 생성 후 저장해준다.
  - 소스트리에서 수정된 부분을 커밋해준다.
  - 커밋 후, 소스트리 상단의 [Push]를 클릭하면 상대방의 원격저장소(원래 소유자)에도 반영된다.
    - 원본저장소의 소유자가 내 계정을 collaborator로 등록해줘야 가능하다.
<br/>

- 내 github계정을 새로 만들어서 포크한 원격저장소에 커밋 후 push하려니 계속해서 에러가 발생했다. 
- 구글 서칭해서 내 컴퓨터 자체의 key값을 수정해줘야 한다는 것을 보고 Keychain Access.app을 들어가서 GitHub을 클릭 후 두번째 github계정으로 정보를 수정해줌. 
- 정보 수정 후, 터미널에서 push해보니 잘 됨. 하지만 sourcetree에서는 여전히 push를 하면 오류가 발생한다...
	- 터미널에서 push 한 후, sourcetree에서 푸시를 누르면 이건 됨.!!
	- 터미널에서 push하지 않고, sourcetree에서 단독으로 푸시하려면 에러 발생하는 것....
- 앞으로 github계정을 바꿔서 커밋,푸시하려면 key값도 계속해서 수정해줘야 할 듯 싶다....
- (참고 블로그 주소)[[https://recoveryman.tistory.com/392](https://recoveryman.tistory.com/392)]
<br/>

### 02. 원본저장소에 풀 리퀘스트 보내기
- 포크해서 올린 커밋을 원본저장소에 반영해보자.

#### 1) 포크한 원격저장소에서 원본저장소로 풀 리퀘스트 보내기
- 원본저장소(상대방 저장소)에서 커밋하고 푸시한 파일이 보일 것이다.
- 이 변경된 파일을 원본저장소의 소유자에게 알리고 병합 요청을 보내야 한다.
  - 왼쪽의 [New Pull request]버튼을 클릭한다.
  - 버튼 클릭 후 [Able to merge]글씨가 보이면 충돌 없이 바로 병합 가능하다는 의미이다.
  - 아래의 변경 파일 정보(changed files)를 확인 후, [Create pull request]버튼을 누른다.
  - 풀 리퀘스트에 대한 설명을 적고, [Create pull request]를 다시 눌러준다.

#### 2) 풀 리퀘스트를 승인하고, 병합하기
- 원본저장소에서 [Insights]탭을 클릭하고, 왼쪽의 [Forks]를 클릭하면 협력자가 포크를 했다는 것을 알 수 있다.
- 상단의 [Pull requests]탭을 누르면 풀 리퀘스트 요청이 들어온 것을 확인할 수 있다.
	- 해당 요청을 눌러서 [File changed]탭을 클릭하면 어떤 새로운 코드가 이 풀 리퀘스트에 담겨있는지 확인할 수 있다.
	- 우측 상단의 [Review changes]를 선택한다.
		- 댓글만 달고싶으면 [Comment].
		- 댓글을 달고 코드가 좋아 바로 병합해도 될 것 같으면 [Approve].
		- 수정을 요청하고 싶으면 [Request change]를 선택한다.
	- 실습에서는 [Approve]를 해준 후, [Merge pull request]클릭 후 [Confirm merge]버튼을 눌러 풀 리퀘스트를 병합해줬다.
	- 풀 리퀘스트 승인, 병합은 원본저장소 주인만 할 수 있다. (협력자는 할 수 없지 당연히!)
- 상단 [Insights]탭의 [Contributors]메뉴에 가보면 원본저장소의 컨트리뷰터에 협력자가 포함된 것을 확인할 수 있다.

### 03. 묵은 커밋을 새 커밋으로 이력 조작하기(rebase)
- 변경한 부분만 풀 리퀘스트를 보내보자.

#### 1)  원본저장소에 새로운 커밋이 있는데, 포크한 내 원격저장소에는 안보여요!
- [New pull request]버튼 클릭시 ```✘ Can’t automatically merge```글씨가 빨갛게 보이면 충돌이 일어났다는 의미다.
	- 충돌을 해결하고 다시 풀 리퀘승트를 보내야 한다.
	
#### 2) 여러 원격저장소 히스토리를 한 눈에 보기:리모트 추가(Add remote)
- 소스트리에서 원격저장소로 이동 후 [저장소 - 원격 저장소 추가]를 클릭한다. 
- 보고싶은 원본저장소 주소를 다른이름으로 추가해준다.
- 추가하면, 소스트리의 좌측의 [원격]에 새로 저장한 원본저장소가 나타난 것을 볼 수 있다.
- 새로 나타난 원본저장소에서 우클릭 후 [(원본저장소이름)에서 가져오기]를 클릭해 원본저장소에 있는 커밋 히스토리를 받아온다. (패치(Fetch))

#### 3) 묵은 커밋을 방금 한 커밋처럼:리베이스(Rebase)
- 풀 리퀘스트를 보냈을 때 충돌이 날 경우 두 가지 방법을 택할 수 있다. 
- 1. 현재 커밋과 병합하고 싶은 커밋을 미리 내 브랜치에서 병합해서 병합 커밋을 만들고, 이를 풀 리퀘스트로 보내는 방법.
		- 하지만 이 방법은 나의 풀 리퀘스트에 불필요한 병합 커밋 이력이 남게 된다.
- 2. 묵은 커밋을 방금 한 커밋처럼 이력을 조작하는 방법.

		- 커밋의 베이스를 다른 곳으로 붙여준다. (rebase)

	- 새로운 베이스로 삼고 싶은 커밋을 클릭하고 우클릭에서 [재배치]를 눌러준다.(재배치=rebase)
	- 충돌했다는 경고창이 나타나는데, 확인을 눌러준 후 충돌한 코드를 수정해주면 된다.
	- 코드 수정 후, 소스트리에서 하단의 해당 파일을 스테이지에 올려준다.
		- 수정했기 때문에 스테이지로 잘 올라가진다.
	- 상단 메뉴의 [액션(동작) - 재배치 계속]을 클릭해 리베이스를 계속해서 진행해준다.
	
	- 리베이스 후 푸시를 해서 로컬저장소의 이력을 원격저장소에 반영해줘야 한다.	
		-  ***리베이스는 이력을 조작하는 행위기 때문에, 일반 푸시로는 수행할 수 없다!!***
	
		- 리베이스를 하려면 다른 개발자가 이 변경사항을 사용하고 있지 않아야 한다. 리베이스는 히스토리를 강제로 조작하기 때문에 다른 사람이 만약 이 히스토리를 보고 있다면 완전히 꼬이게 된다.
		- 이처럼 이력을 조작하고 푸시를 하는 건 다른 개발자에게 위험한 행위이다. 따라서 **무조건 혼자 사용하는 브랜치에서**만 해야 한다.!!!!
		- 이력을 조작하면 특수한 옵션을 붙여서 푸시해야 한다.   
		  ===> [강제 푸시]
		  	  
		      1. [도구 - 옵션]을 클릭한다.  
		          - 맥은 [Sourcetree - 설정 - Git]
		              
		      2. [강제 푸시 기능]에 체크해준다.
		          - 맥은 Git탭에 없다.   
		          - 우측상단의 [고급]에서 [강제 푸시를 허용]에 체크해 준다.	   
		                 
		      3. 소스트리에서 push클릭 후 [강제 푸시]에 체크후 푸시해준다.
		          - 역시나 두번째 계정에서 푸시하려니 에러가 난다..
		          - 터미널에서 강제푸시 해주자.
		             $ git push -f origin master
		          - 터미널에서 (강제)푸시 후 소스트리에서 강제푸시해주면 잘 된다.
<br/>
	
- 	충돌을 해결 후, 풀 리퀘스트를 보내면 잘 된다.
	
	-  [New pull request]를 클릭하면 ```✔ Able to merge.``` 이라는 병합할 수 있다는 의미의 초록색 글자가 나타난다. 
